function reactivateCategory(){var e=null;0!==arguments.length&&(e=arguments[0]),$category_tree.each(function(t,n){var o=$("#"+n.id).fancytree("getTree"),a=(e?o.getNodeByKey(e.key):null)||o.getActiveNode();a&&void 0!==a&&(a.setActive(!1),a.setActive(!0))})}function reloadAttribute(){if(0==arguments.length)$attribute_synchro_trees.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.source.data.cache=$('input[name = "attributico_cache"]:checkbox').is(":checked"),ClearFilter(n),n.reload().done(function(){n.options.source.data.isPending=!1})});else{var e=arguments[0],t=arguments[1];$attribute_synchro_trees.each(function(n,o){var a=$("#"+o.id).fancytree("getTree");a.options.source.data.cache=$('input[name = "attributico_cache"]:checkbox').is(":checked"),(a!==e.tree||t)&&(ClearFilter(a),a.reload().done(function(){a.options.source.data.isPending=!1;var t=a.getNodeByKey(e.key);t&&void 0!==t&&t.setActive()}))}),t||e.setActive()}}function ClearFilter(e,t,n){e.isFilterActive()&&(e.clearFilter(),3===arguments.length?($("input[name *= "+t+"_search"+n+"]").val(""),$("span[id *= "+t+"_matches"+n+"]").text("")):($('input[name *= "search"]').val(""),$('span[id *= "matches"]').text("")),$("[id ^=loadImg]").hide())}function FilterSettingsChange(e){var t=$(this).attr("id"),n=$(this).is(":checked");switch(t){case e.data.tab+"_autoExpand"+e.data.lng_id:case e.data.tab+"_regex"+e.data.lng_id:case e.data.tab+"_leavesOnly"+e.data.lng_id:case e.data.tab+"_attributesOnly"+e.data.lng_id:break;case e.data.tab+"_autoComplete"+e.data.lng_id:$("button#"+e.data.tab+"_btnSearch"+e.data.lng_id).attr("disabled",$(this).is(":checked"));break;case e.data.tab+"_hideMode"+e.data.lng_id:e.data.tree.options.filter.mode=n?"hide":"dimm";break;case e.data.tab+"_counter"+e.data.lng_id:case e.data.tab+"_fuzzy"+e.data.lng_id:case e.data.tab+"_hideExpandedCounter"+e.data.lng_id:case e.data.tab+"_highlight"+e.data.lng_id:e.data.tree.options.filter[t.replace(/\d/g,"")]=n}e.data.tree.clearFilter(),$("input[name="+e.data.tab+"_search"+e.data.lng_id+"]").trigger("keyup")}function FilterSearch(e){var t=0,n={autoExpand:$("#"+e.data.tab+"_autoExpand"+e.data.lng_id).is(":checked"),leavesOnly:$("#"+e.data.tab+"_leavesOnly"+e.data.lng_id).is(":checked")},o=$("#"+e.data.tab+"_attributesOnly"+e.data.lng_id).is(":checked"),a=$(this).val();return e&&e.which===$.ui.keyCode.ESCAPE||""===$.trim(a)?void $("button#"+e.data.tab+"_btnResetSearch"+e.data.lng_id).click():($("#"+e.data.tab+"_autoComplete"+e.data.lng_id).is(":checked")&&(o||e.data.tree.options.source.data.isPending||(e.data.tree.visit(function(e){e.isLazy()&&e.load(!0)}),e.data.tree.options.source.data.isPending=!0),setTimeout(function(){$("#"+e.data.tab+"_regex"+e.data.lng_id).is(":checked")?(t=e.data.tree.filterNodes(function(e){return new RegExp(a,"i").test(e.title)},n),$("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")")):(t=e.data.tree.filterNodes(a,n),$("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")"))},600)),$("button#"+e.data.tab+"_btnResetSearch"+e.data.lng_id).attr("disabled",!1),void $("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")"))}function FilterButtonSearch(e){var t=0,n={autoExpand:$("#"+e.data.tab+"_autoExpand"+e.data.lng_id).is(":checked"),leavesOnly:$("#"+e.data.tab+"_leavesOnly"+e.data.lng_id).is(":checked")},o=$("#"+e.data.tab+"_attributesOnly"+e.data.lng_id).is(":checked"),a=$("input[name="+e.data.tab+"_search"+e.data.lng_id+"]").val();return e&&e.which===$.ui.keyCode.ESCAPE||""===$.trim(a)?void $("button#"+e.data.tab+"_btnResetSearch"+e.data.lng_id).click():(o||e.data.tree.options.source.data.isPending||(e.data.tree.visit(function(e){e.isLazy()&&e.load(!0)}),e.data.tree.options.source.data.isPending=!0),setTimeout(function(){$("#"+e.data.tab+"_regex"+e.data.lng_id).is(":checked")?(t=e.data.tree.filterNodes(function(e){return new RegExp(a,"i").test(e.title)},n),$("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")")):(t=e.data.tree.filterNodes(a,n),$("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")"))},600),$("button#"+e.data.tab+"_btnResetSearch"+e.data.lng_id).attr("disabled",!1),void $("span#"+e.data.tab+"_matches"+e.data.lng_id).text("("+t+")"))}function getSelectedKeys(e){var t=[];return e&&e.forEach(function(e){t.push(e.key)}),t}function getSelectedTitles(){var e=[];return selNodes&&selNodes.forEach(function(t){e.push(t.title)}),e}function deSelectNodes(e){selNodes&&selNodes.forEach(function(e){e.setSelected(!1)}),selNodes=null}function selectControl(e){return e.node.isTopLevel()?(e.node.setSelected(!1),!1):(e.node.tree.visit(function(t){e.node.getLevel()!==t.getLevel()&&t.setSelected(!1)}),!0)}function addAttribute(e,t,n){for(var o=e,a="attribute"===t?2:1;o.getLevel()>a;)o=o.getParent();$.ajax({data:{user_token:user_token,token:token,key:o.key,name:"attribute"===t?textNewAttribute:textNewGroup},url:"index.php?route="+extension+"module/attributico/addAttribute",success:function(e){o.editCreateNode("child",{title:"attribute"===t?textNewAttribute[n]:textNewGroup[n],key:t+"_"+e,folder:"group"===t})}})}function deleteAttribute(e){if(confirm(textConfirm)&&(2===e.getLevel()||3===e.getLevel())){var t=e.findUnselectedSibling();$.ajax({data:{user_token:user_token,token:token,keys:selNodes?getSelectedKeys(selNodes):[e.key]},url:"index.php?route="+extension+"module/attributico/deleteAttributes",success:function(){selNodes?$.each(selNodes,function(e,t){t.remove()}):e.remove(),reloadAttribute(t,!1),selNodes=null}})}}function copyAttributes(e){var t=e.getParentByKey("group")||e.getParentByKey("category");t.key.indexOf("group")+1&&$.ajax({data:{user_token:user_token,token:token,target:t.key,attributes:clipboardTitles},url:"index.php?route="+extension+"module/attributico/addAttributes",success:function(){reloadAttribute(e,!0)}}),t.key.indexOf("category")+1&&$.ajax({data:{attributes:selNodes?getSelectedKeys(selNodes):[clipboardNodes[0][1].key],category_id:t.key,categories:selCategories?getSelectedKeys(selCategories):[t.key]},url:"index.php?route="+extension+"module/attributico/addCategoryAttributes&user_token="+user_token+"&token="+token,type:"POST",success:function(){reactivateCategory(t)}})}function deleteAttributesFromCategory(e,t){var n=e.getParent().key;$.ajax({data:{attributes:selNodes?getSelectedKeys(selNodes):[e.key],category_id:n,categories:selCategories?getSelectedKeys(selCategories):[n]},url:"index.php?route="+extension+"module/attributico/deleteAttributesFromCategory&user_token="+user_token+"&token="+token,type:"POST",success:function(){reactivateCategory(t),reloadAttribute(e,!0)}}),selNodes=null}function addAttributeToCategory(e,t,n){$.ajax({data:{attributes:selNodes?getSelectedKeys(selNodes):[t.otherNode.key],category_id:e.key,categories:selCategories?getSelectedKeys(selCategories):[e.key]},url:"index.php?route="+extension+"module/attributico/addCategoryAttributes&user_token="+user_token+"&token="+token,type:"POST"}).done(function(){n?deleteAttributesFromCategory(t.otherNode,e):(deSelectNodes(t.otherNode),t.otherNode.tree.visit(function(e){e.isLazy()&&e.load(!0)}),reactivateCategory(e),reloadAttribute(t.otherNode,!1))})}function copyPaste(e,t){switch(e){case"cut":case"copy":pasteMode=e,selNodes?selNodes.forEach(function(e,t){clipboardNodes[t]=[],clipboardTitles[t]=[],$attribute_group_tree.each(function(n,o){var a=$("#"+o.id).fancytree("getTree"),r=parseInt(o.id.replace(/\D+/gi,""));clipboardNodes[t][r]=a.getNodeByKey(e.key),clipboardTitles[t][r]=a.getNodeByKey(e.key).title})}):(clipboardNodes[0]=[],clipboardTitles[0]=[],$attribute_group_tree.each(function(e,n){var o=$("#"+n.id).fancytree("getTree"),a=parseInt(n.id.replace(/\D+/gi,""));clipboardNodes[0][a]=o.getNodeByKey(t.key),clipboardTitles[0][a]=o.getNodeByKey(t.key).title}));break;case"paste":if(0==clipboardNodes.length){alert("Clipoard is empty.");break}"cut"==pasteMode?(copyAttributes(t,clipboardTitles),clipboardNodes[indx].remove()):copyAttributes(t,clipboardTitles),clipboardNodes=[],clipboardTitles=[],pasteMode=null;break;default:alert("Unhandled clipboard action '"+e+"'")}}function initTrees(){$attribute_group_tree.each(function(e,t){var n=parseInt(t.id.replace(/\D+/gi,"")),o="tab-attribute",a=$("#attribute_group_tree"+n),r=$('input[id = "sortOrder_attribute_group_tree'+n+'"]:checkbox').is(":checked"),i=$('input[id = "lazyLoad_attribute_group_tree'+n+'"]:checkbox').is(":checked");a.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,extensions:["edit","dnd","filter"],selectMode:2,checkbox:!1,quicksearch:!0,source:{data:{user_token:user_token,token:token,language_id:n,sortOrder:r,lazyLoad:i,tree:"1",isPending:!1},url:"index.php?route="+extension+"module/attributico/getAttributeGroupTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},lazyLoad:function(e,t){t.result={data:{user_token:user_token,token:token,key:t.node.key,language_id:n},url:"index.php?route="+extension+"module/attributico/getLazyAttributeValues"}},edit:{triggerStart:["f2","shift+click","mac+enter"],inputCss:{minWidth:"18em"},beforeEdit:function(e,t){if(t.node.isRootNode()||1===t.node.getLevel()||4===t.node.getLevel())return!1},edit:function(e,t){},beforeClose:function(e,t){},save:function(e,t){var o=t.node.getParent();return $.ajax({data:{user_token:user_token,token:token,key:t.node.key,name:t.input.val(),language_id:n,oldname:t.orgTitle},url:"index.php?route="+extension+"module/attributico/editAttribute"}).done(function(e){t.node.key.indexOf("template")+1?t.node.parent.isLazy()?o.getNextSibling().load(!0).done(function(e){reloadAttribute(t.node,!1)}):reloadAttribute(t.node,!0):t.node.key.indexOf("value")+1?t.node.parent.isLazy()?o.getPrevSibling().load(!0).done(function(e){o.load(!0).done(function(e){(t.node.tree.getNodeByKey(t.node.key)||t.node.getPrevSibling()||t.node.getNextSibling()).setActive()})}).done(function(e){reloadAttribute(t.node,!1)}):reloadAttribute(t.node,!0):reloadAttribute(t.node,!1),t.node.setTitle(e.acceptedTitle)}).fail(function(e){t.node.setTitle(t.orgTitle)}).always(function(){$(t.node.span).removeClass("pending")}),!0},close:function(e,t){t.save&&$(t.node.span).addClass("pending")}},dnd:{autoExpandMS:600,focusOnClick:!0,preventVoidMoves:!0,preventRecursiveMoves:!1,dragStart:function(e,t){return!(t.node.isRootNode()||t.node.getLevel()>3)},dragEnter:function(e,t){var n=e.getLevel(),o=t.otherNode.getLevel(),a=t.otherNode;return!(1===n||n>o)&&(e!==a.parent&&(!(e.parent===a.parent&&!t.tree.options.source.data.sortOrder&&!t.originalEvent.ctrlKey)&&(n!==o||t.originalEvent.ctrlKey?["over"]:["before","after"])))},dragDrop:function(e,t){var n=t.otherNode,o=e.getLevel(),a=n.getLevel(),r=!1,i=e.getParent()!==n.getParent(),c=t.originalEvent.ctrlKey&&o===a;c&&!confirm(textConfirm)||(selNodes?$.each(selNodes,function(n,o){c?o.remove():(o.moveTo(e,t.hitMode),r=!0)}):c?n.remove():n.moveTo(e,t.hitMode),c?(url="index.php?route="+extension+"module/attributico/mergeAttributeGroup",r=!0):i?(url="index.php?route="+extension+"module/attributico/replaceAttributeGroup",r=!1):url="index.php?route="+extension+"module/attributico/sortAttributeGroup",$.ajax({data:{user_token:user_token,token:token,subjects:selNodes?getSelectedKeys(selNodes):[n.key],group:e.getParent().key,target:e.key,direct:t.hitMode},url:url}).done(function(){reloadAttribute(n,r),deSelectNodes(n)}))},draggable:{scroll:!0}},beforeSelect:function(e,t){if(!selectControl(t))return!1},select:function(e,t){selNodes=t.tree.getSelectedNodes()},click:function(e,t){e.ctrlKey?t.node.toggleSelected():deSelectNodes(t.node)},keydown:function(e,t){var o=t.node;switch(e.which){case 68:e.altKey&&(console.log("Debug mode: "),$.ajax({data:{user_token:user_token,token:token},url:"index.php?route="+extension+"module/attributico/debugSwitch",success:function(e){console.log(e)}}));break;case 66:e.ctrlKey&&(o.tree.visit(function(e){e.setExpanded(d)}),d=!d);break;case 46:deleteAttribute(o);break;case 77:e.ctrlKey&&addAttribute(o,"group",n);break;case 81:e.ctrlKey&&addAttribute(o,"attribute",n);break;case 67:if(e.ctrlKey)return copyPaste("copy",o),!1;break;case 86:if(e.ctrlKey)return copyPaste("paste",o),deSelectNodes(o),!1}},filter:{autoApply:!0,counter:!0,fuzzy:!1,hideExpandedCounter:!0,highlight:!0,mode:"dimm"}});var c=a.fancytree("getTree"),d=!0;$("input[name="+o+"_search"+n+"]").keyup({tree:c,tab:o,lng_id:n},FilterSearch).focus(),$("button#"+o+"_btnSearch"+n).click({tree:c,tab:o,lng_id:n},FilterButtonSearch),$("div#"+o+"_filter"+n+" input:checkbox").change({tree:c,tab:o,lng_id:n},FilterSettingsChange),$("button#"+o+"_btnResetSearch"+n).click(function(e){ClearFilter(c,o,n)}).attr("disabled",!0),$("button#"+o+"_btnSearch"+n).attr("disabled",$("input#"+o+"_autoComplete"+n).is(":checked")),a.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[n],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);a.contextmenu("enableEntry","copy",!n.key.indexOf("attribute")),a.contextmenu("enableEntry","paste",!(0==clipboardNodes.length||n.getParent().isRootNode())),n.setActive()},select:function(e,t){var o=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":c.visit(function(e){e.setExpanded(!0)}),d=!d;break;case"collapse":c.visit(function(e){e.setExpanded(!1)}),d=!d;break;case"options":$("#options_attribute_group_tree"+n).dialog("open");break;case"rename":o.editStart();break;case"remove":deleteAttribute(o);break;case"addChild":1!==o.getLevel()&&addAttribute(o,"attribute",n);break;case"addSibling":addAttribute(o,"group",n);break;case"copy":copyPaste(t.cmd,o);break;case"paste":copyPaste(t.cmd,o),deSelectNodes(o);break;default:alert("Todo: appply action '"+t.cmd+"' to node "+o)}}})}),$category_tree.each(function(e,t){var n=parseInt(t.id.replace(/\D+/gi,"")),o=$("#category_tree"+n),a=!0,r=$('input[id = "sortOrder_category_tree'+n+'"]:checkbox').is(":checked");o.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,extensions:["dnd"],checkbox:!0,selectMode:$('input[id = "multiSelect_category_tree'+n+'"]:checkbox').is(":checked")?3:2,source:{data:{user_token:user_token,token:token,language_id:n,sortOrder:r},url:"index.php?route="+extension+"module/attributico/getCategoryTree"},activate:function(e,t){var o=$("#category_attribute_tree"+n).fancytree("getTree");currentCategory=t.node.key,o.reload({data:{user_token:user_token,token:token,language_id:n,category_id:currentCategory,sortOrder:$('input[id = "sortOrder_category_attribute_tree'+n+'"]:checkbox').is(":checked"),tree:"4"},url:"index.php?route="+extension+"module/attributico/getCategoryAttributeTree"})},dnd:{autoExpandMS:400,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,dragStart:function(e,t){return!1},dragEnter:function(e,t){return t.otherNode.getParent().key!==e.key},dragDrop:function(e,t){addAttributeToCategory(e,t,t.otherNode.tree.$div.context.id.indexOf("attribute_tree"))}},select:function(e,t){selCategories=t.tree.getSelectedNodes(),t.tree.options.autoCollapse=!1,t.node.setExpanded(!(t.node.expanded&&!selCategories.length))},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(a)}),a=!a);break;case 86:if(e.ctrlKey)return copyPaste("paste",n),deSelectNodes(n),!1}},focusTree:function(e,t){t.tree.$container.focus()}}),o.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[n],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);o.contextmenu("enableEntry","remove",!1),o.contextmenu("enableEntry","rename",!1),o.contextmenu("enableEntry","addSibling",!1),o.contextmenu("enableEntry","addChild",!1),o.contextmenu("enableEntry","paste",!(0==clipboardNodes.length||n.getParent().isRootNode())),n.setActive()},select:function(e,t){var a=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":o.fancytree("getTree").visit(function(e){e.setExpanded(!0)});break;case"collapse":o.fancytree("getTree").visit(function(e){e.setExpanded(!1)});break;case"options":$("#options_category_tree"+n).dialog("open");break;case"paste":copyPaste(t.cmd,a),deSelectNodes(a);break;default:alert("Todo: appply action '"+t.cmd+"' to node "+a)}}})}),$category_attribute_tree.each(function(e,t){var n=parseInt(t.id.replace(/\D+/gi,"")),o=$("#category_attribute_tree"+n),a=!0,r=$('input[id = "sortOrder_category_attribute_tree'+n+'"]:checkbox').is(":checked");o.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,selectMode:2,extensions:["edit","dnd"],source:{data:{user_token:user_token,token:token,language_id:n,category_id:currentCategory,sortOrder:r,tree:"4"},url:"index.php?route="+extension+"module/attributico/getCategoryAttributeTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},lazyLoad:function(e,t){t.result={data:{user_token:user_token,token:token,key:t.node.key,language_id:n},url:"index.php?route="+extension+"module/attributico/getLazyAttributeValues"}},edit:{triggerStart:[],inputCss:{minWidth:"18em"},beforeEdit:function(e,t){if(!t.isNew)return!1},edit:function(e,t){t.input.dropmenu({source:function(e,t){$.ajax({data:{user_token:user_token,token:token,filter_name:encodeURIComponent(e),language_id:n},url:"index.php?route="+extension+"module/attributico/autocomplete",dataType:"json",success:function(e){t($.map(e,function(e){return{category:e.attribute_group,label:e.name,value:e.attribute_id}}))}})},select:function(e){t.input.val(e.label),t.node.key="attribute_"+e.value}})},beforeClose:function(e,t){},save:function(e,t){return $.ajax({data:{attributes:[t.node.key],category_id:t.node.getParent().key,categories:selCategories?getSelectedKeys(selCategories):[t.node.getParent().key]},url:"index.php?route="+extension+"module/attributico/addCategoryAttributes&user_token="+user_token+"&token="+token,type:"POST"}).done(function(){$(t.node.span).removeClass("pending"),t.node.setTitle(t.node.title),reactivateCategory(t.node.getParent())}),!0},close:function(e,t){t.save&&$(t.node.span).addClass("pending")}},dnd:{autoExpandMS:400,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,dragStart:function(e,t){return!0},dragEnter:function(e,t){return e.tree!==t.otherNode.tree&&!(e.getLevel()>2)},dragDrop:function(e,t){addAttributeToCategory(e.getParent().isRootNode()?e:e.getParent(),t,!1)}},beforeSelect:function(e,t){if(!selectControl(t))return!1},select:function(e,t){selNodes=t.tree.getSelectedNodes()},click:function(e,t){e.ctrlKey?t.node.toggleSelected():deSelectNodes(t.node)},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(a)}),a=!a);break;case 46:if(!confirm(textConfirm))break;deleteAttributesFromCategory(n,n);break;case 81:e.ctrlKey&&n.tree.getRootNode().getFirstChild().editCreateNode("child");break;case 67:if(e.ctrlKey)return copyPaste("copy",n),!1;break;case 86:if(e.ctrlKey)return copyPaste("paste",n),deSelectNodes(n),!1}},focusTree:function(e,t){t.tree.$container.focus()}}),o.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[n],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);o.contextmenu("enableEntry","remove",!n.key.indexOf("attribute")),o.contextmenu("enableEntry","rename",!1),o.contextmenu("enableEntry","addSibling",!1),o.contextmenu("enableEntry","copy",!n.key.indexOf("attribute")),o.contextmenu("enableEntry","paste",!(0==clipboardNodes.length)),n.setActive()},select:function(e,t){var a=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":o.fancytree("getTree").visit(function(e){e.setExpanded(!0)});break;case"collapse":o.fancytree("getTree").visit(function(e){e.setExpanded(!1)});break;case"remove":if(!confirm(textConfirm))break;deleteAttributesFromCategory(a,a);break;case"addChild":a.tree.getRootNode().getFirstChild().editCreateNode("child");break;case"options":$("#options_category_attribute_tree"+n).dialog("open");break;case"copy":copyPaste(t.cmd,a);break;case"paste":copyPaste(t.cmd,a),deSelectNodes(a);break;default:alert("Todo: appply action '"+t.cmd+"' to node "+a)}}})}),$attribute_tree.each(function(e,t){var n="tab-category",o=parseInt(t.id.replace(/\D+/gi,"")),a=$("#attribute_tree"+o),r=!0,i=$('input[id = "sortOrder_attribute_tree'+o+'"]:checkbox').is(":checked"),c=$('input[id = "lazyLoad_attribute_tree'+o+'"]:checkbox').is(":checked");a.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,extensions:["dnd","filter"],selectMode:2,checkbox:!1,quicksearch:!0,source:{data:{user_token:user_token,token:token,language_id:o,sortOrder:i,lazyLoad:c,isPending:!1,tree:"3"},url:"index.php?route="+extension+"module/attributico/getAttributeGroupTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},lazyLoad:function(e,t){t.result={data:{user_token:user_token,token:token,key:t.node.key,language_id:o},url:"index.php?route="+extension+"module/attributico/getLazyAttributeValues"}},dnd:{autoExpandMS:800,focusOnClick:!0,preventVoidMoves:!0,preventRecursiveMoves:!0,dragStart:function(e,t){return 3===t.node.getLevel()},draggable:{revert:!0,cursorAt:{top:-5,left:-5},connectToFancytree:!0,appendTo:"body",scroll:!0}},beforeSelect:function(e,t){if(!selectControl(t))return!1},select:function(e,t){selNodes=t.tree.getSelectedNodes()},click:function(e,t){e.ctrlKey?t.node.toggleSelected():deSelectNodes(t.node)},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(r)}),r=!r);break;case 67:if(e.ctrlKey)return copyPaste("copy",n),!1}},filter:{autoApply:!0,counter:!0,fuzzy:!1,hideExpandedCounter:!0,highlight:!0,mode:"dimm"}});var d=a.fancytree("getTree");$("input[name="+n+"_search"+o+"]").keyup({tree:d,tab:n,lng_id:o},FilterSearch).focus(),$("button#"+n+"_btnSearch"+o).click({tree:d,tab:n,lng_id:o},FilterButtonSearch),$("div#"+n+"_filter"+o+" input:checkbox").change({tree:d,tab:n,lng_id:o},FilterSettingsChange),$("button#"+n+"_btnResetSearch"+o).click(function(e){ClearFilter(d,n,o)}).attr("disabled",!0),$("button#"+n+"_btnSearch"+o).attr("disabled",$("input#"+n+"_autoComplete"+o).is(":checked")),a.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[o],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);a.contextmenu("enableEntry","remove",!1),a.contextmenu("enableEntry","rename",!1),a.contextmenu("enableEntry","addSibling",!1),a.contextmenu("enableEntry","addChild",!1),a.contextmenu("enableEntry","copy",!n.key.indexOf("attribute")),n.setActive()},select:function(e,t){var n=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":a.fancytree("getTree").visit(function(e){e.setExpanded(!0)});break;case"collapse":a.fancytree("getTree").visit(function(e){e.setExpanded(!1)});break;case"options":$("#options_attribute_tree"+o).dialog("open");break;case"copy":copyPaste(t.cmd,n);break;default:alert("Todo: appply action '"+t.cmd+"' to node "+n)}}})}),$duty_attribute_tree.each(function(e,t){var n=parseInt(t.id.replace(/\D+/gi,"")),o=$("#duty_attribute_tree"+n),a="tab-duty",r=$('input[id = "sortOrder_duty_attribute_tree'+n+'"]:checkbox').is(":checked"),i=$('input[id = "lazyLoad_duty_attribute_tree'+n+'"]:checkbox').is(":checked");o.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,extensions:["edit","filter"],checkbox:!1,quicksearch:!0,source:{data:{user_token:user_token,token:token,language_id:n,sortOrder:r,lazyLoad:i,isPending:!1,tree:"2"},url:"index.php?route="+extension+"module/attributico/getAttributeGroupTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},lazyLoad:function(e,t){t.result={data:{user_token:user_token,token:token,key:t.node.key,language_id:n},url:"index.php?route="+extension+"module/attributico/getLazyAttributeValues"}},edit:{triggerStart:["f2","shift+click","mac+enter"],inputCss:{minWidth:"18em"},beforeEdit:function(e,t){if(t.node.isRootNode()||1===t.node.getLevel())return!1},save:function(e,t){var o=t.node.getParent();return $.ajax({data:{user_token:user_token,token:token,key:t.node.key,name:t.input.val(),language_id:n,oldname:t.orgTitle},url:"index.php?route="+extension+"module/attributico/editAttribute"}).done(function(e){t.node.key.indexOf("template")+1?o.getNextSibling().load(!0).done(function(e){reloadAttribute(t.node,!1)}):t.node.key.indexOf("value")+1?o.getPrevSibling().load(!0).done(function(e){o.load(!0).done(function(e){(t.node.tree.getNodeByKey(t.node.key)||t.node.getPrevSibling()||t.node.getNextSibling()).setActive()})}).done(function(e){reloadAttribute(t.node,!1)}):reloadAttribute(t.node,!1),t.node.setTitle(e.acceptedTitle)}).fail(function(e){t.node.setTitle(t.orgTitle)}).always(function(){$(t.node.span).removeClass("pending")}),!0},close:function(e,t){t.save&&$(t.node.span).addClass("pending")}},beforeSelect:function(e,t){return!1},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(d)}),d=!d)}},filter:{autoApply:!0,counter:!0,fuzzy:!1,hideExpandedCounter:!0,highlight:!0,mode:"dimm"}});var c=o.fancytree("getTree"),d=!0;$("input[name="+a+"_search"+n+"]").keyup({tree:c,tab:a,lng_id:n},FilterSearch).focus(),$("button#"+a+"_btnSearch"+n).click({tree:c,tab:a,lng_id:n},FilterButtonSearch),$("div#"+a+"_filter"+n+" input:checkbox").change({tree:c,tab:a,lng_id:n},FilterSettingsChange),$("button#"+a+"_btnResetSearch"+n).click(function(e){ClearFilter(c,a,n)}).attr("disabled",!0),$("button#"+a+"_btnSearch"+n).attr("disabled",$("input#"+a+"_autoComplete"+n).is(":checked")),o.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[n],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);o.contextmenu("enableEntry","remove",!1),o.contextmenu("enableEntry","addSibling",!1),o.contextmenu("enableEntry","addChild",!1),n.setActive()},select:function(e,t){var o=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":c.visit(function(e){e.setExpanded(!0)}),d=!d;break;case"collapse":c.visit(function(e){e.setExpanded(!1)}),d=!d;break;case"options":$("#options_duty_attribute_tree"+n).dialog("open");break;case"rename":o.editStart();break;default:alert("Todo: appply action '"+t.cmd+"' to node "+o)}}})}),$attribute_product_tree.each(function(e,t){var n="tab-products",o=parseInt(t.id.replace(/\D+/gi,"")),a=$("#attribute_product_tree"+o),r=!0,i=$('input[id = "sortOrder_attribute_product_tree'+o+'"]:checkbox').is(":checked"),c=$('input[id = "lazyLoad_duty_attribute_tree'+o+'"]:checkbox').is(":checked");a.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,extensions:["filter"],selectMode:2,checkbox:!1,quicksearch:!0,source:{data:{user_token:user_token,token:token,language_id:o,sortOrder:i,lazyLoad:c,isPending:!1,tree:"5"},url:"index.php?route="+extension+"module/attributico/getAttributeGroupTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},beforeActivate:function(e,t){},activate:function(e,t){var n=$("#product_tree"+o).fancytree("getTree");currentAttributeID=t.node.key,n.reload({data:{user_token:user_token,token:token,language_id:o,attribute_id:currentAttributeID,title:t.node.title,sortOrder:i},url:"index.php?route="+extension+"module/attributico/getProductTree"})},lazyLoad:function(e,t){t.result={data:{user_token:user_token,token:token,key:t.node.key,language_id:o},url:"index.php?route="+extension+"module/attributico/getLazyAttributeValues"}},beforeSelect:function(e,t){if(!selectControl(t))return!1},select:function(e,t){selNodes=t.tree.getSelectedNodes()},click:function(e,t){},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(r)}),r=!r);break;case 67:if(e.ctrlKey)return copyPaste("copy",n),!1}},filter:{autoApply:!0,counter:!0,fuzzy:!1,hideExpandedCounter:!0,highlight:!0,mode:"dimm"}});var d=a.fancytree("getTree");$("input[name="+n+"_search"+o+"]").keyup({tree:d,tab:n,lng_id:o},FilterSearch).focus(),$("button#"+n+"_btnSearch"+o).click({tree:d,tab:n,lng_id:o},FilterButtonSearch),$("div#"+n+"_filter"+o+" input:checkbox").change({tree:d,tab:n,lng_id:o},FilterSettingsChange),$("button#"+n+"_btnResetSearch"+o).click(function(e){ClearFilter(d,n,o)}).attr("disabled",!0),$("button#"+n+"_btnSearch"+o).attr("disabled",$("input#"+n+"_autoComplete"+o).is(":checked")),a.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[o],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);a.contextmenu("enableEntry","remove",!1),a.contextmenu("enableEntry","rename",!1),a.contextmenu("enableEntry","addSibling",!1),a.contextmenu("enableEntry","addChild",!1),a.contextmenu("enableEntry","copy",!n.key.indexOf("attribute")),n.setActive()},select:function(e,t){var n=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":a.fancytree("getTree").visit(function(e){e.setExpanded(!0)});break;case"collapse":a.fancytree("getTree").visit(function(e){e.setExpanded(!1)});break;case"options":$("#options_attribute_product_tree"+o).dialog("open");break;case"copy":copyPaste(t.cmd,n);break;default:alert("Todo: appply action '"+t.cmd+"' to node "+n)}}})}),$product_tree.each(function(e,t){var n=parseInt(t.id.replace(/\D+/gi,"")),o=$("#product_tree"+n),a=!0,r=$('input[id = "sortOrder_product_tree'+n+'"]:checkbox').is(":checked");o.fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,source:{data:{user_token:user_token,token:token,language_id:n,attribute_id:currentAttributeID,sortOrder:r},url:"index.php?route="+extension+"module/attributico/getProductTree"},loadError:function(e,t){var n=t.error;n.status&&n.statusText?(t.message="Ajax error: "+t.message,t.details="Ajax error: "+n.statusText+", status code = "+n.status):(t.message="Custom error: "+t.message,t.details="An error occurred during loading: "+n),console.log(t),console.log(n.responseText)},dblclick:function(e,t){var n=$('input[id = "input-attributico_about_blank"]:checkbox').is(":checked");n?($("#reload.alert-danger").show(),window.open("index.php?route=catalog/product/"+edit+"&user_token="+user_token+"&token="+token+"&product_id="+t.node.key.split("_")[1]+"&attribute_id="+currentAttributeID.split("_")[1],"_blank")):window.location.href="index.php?route=catalog/product/"+edit+"&user_token="+user_token+"&token="+token+"&product_id="+t.node.key.split("_")[1]+"&attribute_id="+currentAttributeID.split("_")[1]},click:function(e,t){},keydown:function(e,t){var n=t.node;switch(e.which){case 66:e.ctrlKey&&(n.tree.visit(function(e){e.setExpanded(a)}),a=!a)}},focusTree:function(e,t){t.tree.$container.focus()}}),o.contextmenu({delegate:"span.fancytree-title",menu:contextmenu[n],beforeOpen:function(e,t){var n=$.ui.fancytree.getNode(t.target);o.contextmenu("enableEntry","remove",!1),o.contextmenu("enableEntry","rename",!1),o.contextmenu("enableEntry","addSibling",!1),o.contextmenu("enableEntry","addChild",!1),o.contextmenu("enableEntry","copy",!1),o.contextmenu("enableEntry","paste",!1),n.setActive()},select:function(e,t){var a=$.ui.fancytree.getNode(t.target);switch(t.cmd){case"expande":o.fancytree("getTree").visit(function(e){e.setExpanded(!0)});break;case"collapse":o.fancytree("getTree").visit(function(e){e.setExpanded(!1)});break;case"options":$("#options_product_tree"+n).dialog("open");
break;default:alert("Todo: appply action '"+t.cmd+"' to node "+a)}}})})}function dutyUpgrade(){$.ajax({data:{user_token:user_token,token:token},url:"index.php?route="+extension+"module/attributico/dutyUpgrade",success:function(){location.reload()}})}function apply(){$('[id ^= "tree"].settings').each(function(e,t){$(t).fancytree("getTree").generateFormElements()}),$(".alert-success, #error_warning.alert-danger").hide(),$.post($("#form-attributico").attr("action"),$("#form-attributico").serialize(),function(e){var t=$(e).find(".alert-success, #error_warning.alert-danger");if(t.length>0)$(".alert-before").before(t);else{var n=$(e).find('[selected="selected"]').val();$.post(n,"",function(e){var t=$(e).find(".alert-success, #error_warning.alert-danger");t.length>0&&$(".alert-before").before(t)})}$('input[id ^= "multiSelect"]:checkbox').prop("checked",$('input[name = "attributico_multiselect"]:checkbox').is(":checked")),$('input[id ^= "sortOrder"]:checkbox').prop("checked",$('input[name = "attributico_sortorder"]:checkbox').is(":checked")),$('input[id ^= "lazyLoad"]:checkbox').prop("checked",$('input[name = "attributico_lazyload"]:checkbox').is(":checked")),$category_tree.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.selectMode=$('input[id ^= "multiSelect"]:checkbox').is(":checked")?3:2}),$category_check_tree.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.selectMode=$('input[id ^= "multiSelect"]:checkbox').is(":checked")?3:2}),$attribute_synchro_trees.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.source.data.sortOrder=$('input[id ^= "sortOrder"]:checkbox').is(":checked"),n.options.source.data.lazyLoad=$('input[id ^= "lazyLoad"]:checkbox').is(":checked"),n.options.source.data.category_id=currentCategory,n.reload()})})}function check_for_updates(){$.ajax({data:{user_token:user_token,token:token},url:"index.php?route="+extension+"module/attributico/check_for_updates",dataType:"json",success:function(e){$("#infoModal").modal("show"),e.errno?(console.log(e),$("#infoModal #modal-content").html(e.errmsg)):e.compare?($("#infoModal #modal-content").html(e.content.well),$("#infoModal #modal-content").append(e.content.copyright)):($("#infoModal #modal-content").html(e.content.news),$("#infoModal #modal-content").append(e.content.links),$("#infoModal #modal-content").append(e.content.copyright))}})}function FilterAction(e,t,n){switch($("span#"+n+"_searchmode"+t+" input#"+n+"_regex"+t+":checkbox").prop({checked:!0}),$(e).attr("id")){case"f_"+n+"_empty":$("input[name="+n+"_search"+t+"]").val("^s*$"),$("button#"+n+"_btnSearch"+t).trigger("click");break;case"f_"+n+"_digital":$("input[name="+n+"_search"+t+"]").val("[0-9]"),$("button#"+n+"_btnSearch"+t).trigger("click");break;case"f_"+n+"_html":$("input[name="+n+"_search"+t+"]").val("<[^>]+>"),$("button#"+n+"_btnSearch"+t).trigger("click");break;case"f_"+n+"_default":$("span#"+n+"_searchmode"+t+" input#"+n+"_regex"+t+":checkbox").prop({checked:!1}),$("button#"+n+"_btnResetSearch"+t).trigger("click")}return!1}function tools(e){$('[id *= "tree"].options').each(function(e,t){$(t).fancytree("getTree").generateFormElements(!0,!0,{filter:null,stopOnParents:!1})}),$.ajax({data:{user_token:user_token,token:token,task:e,options:$("#form-attributico").serialize()},url:"index.php?route="+extension+"module/attributico/tools",beforeSend:function(){$("#column-2 .loader-img").show(),$("#column-2 .alert-success").hide(),$("#column-2 .alert-warning").show()},success:function(e){reloadAttribute(),reactivateCategory(),$("#column-2 .loader-img").hide(),$("#column-2 .alert-warning").hide(),$("#column-2 .alert-success").show(),$("#column-2 .alert-success").html(e)}})}$.ui.fancytree._FancytreeNodeClass.prototype.getParentByKey=function(e){e=null==e?null:""+e;var t=this;if(null!=e&&e!==this.key)for(;t.key.indexOf(e)&&!t.isRootNode();)t=t.getParent();return t.isRootNode()?null:t},$.ui.fancytree._FancytreeNodeClass.prototype.findUnselectedSibling=function(){for(var e=this.getNextSibling()||this.getPrevSibling()||this.getParent();e.isSelected()&&!e.isRootNode();)e=e.getPrevSibling()||e.getParent();return e};var clipboardNodes=[],clipboardTitles=[],pasteMode=null;(function(e){e.fn.dropmenu=function(t){return this.each(function(){this.timer=null,this.items=new Array,$div=e("<div />"),$ul=e("<ul class='drop-menu' />"),$menu=$ul,e.extend(this,t),e(this).attr("autocomplete","off"),e(this).on("focus",function(e){e.preventDefault(),this.request()}),e(this).on("blur",function(){setTimeout(function(e){e.hide()},200,this)}),e(this).on("keydown",function(e){switch(e.preventDefault(),e.keyCode){case 27:this.hide();break;default:this.request()}}),e(this).on("mousedown",function(t){t.preventDefault(),t.stopPropagation(),e(this).focus()}),this.click=function(t){t.preventDefault(),value=e(t.target).parent().attr("data-value"),value&&this.items[value]&&this.select(this.items[value])},this.show=function(){var t=e(this).position();e(this).siblings("div").children($menu).css({top:t.top+e(this).outerHeight(),left:t.left}),e(this).siblings("div").children($menu).show()},this.hide=function(){e(this).siblings("div").children($menu).hide()},this.request=function(){clearTimeout(this.timer),this.timer=setTimeout(function(t){t.source(e(t).val(),e.proxy(t.response,t))},200,this)},this.response=function(t){if(html="",t.length){for(i=0;i<t.length;i++)this.items[t[i].value]=t[i];for(i=0;i<t.length;i++)t[i].category||(html+='<li data-value="'+t[i].value+'"><a href="#">'+t[i].label+"</a></li>");var n=new Array;for(i=0;i<t.length;i++)t[i].category&&(n[t[i].category]||(n[t[i].category]=new Array,n[t[i].category].name=t[i].category,n[t[i].category].item=new Array),n[t[i].category].item.push(t[i]));for(i in n)for(html+='<li class="drop-header">'+n[i].name+"</li>",j=0;j<n[i].item.length;j++)html+='<li data-value="'+n[i].item[j].value+'"><a href="#">&nbsp;&nbsp;&nbsp;'+n[i].item[j].label+"</a></li>"}html?this.show():this.hide(),e(this).siblings("div").children($menu).html(html)},e(this).after($div),$menu.appendTo($div),e(this).siblings("div").children($menu).delegate("a","mousedown",e.proxy(this.click,this))})}})(window.jQuery),$(function(){$('[id ^= "tree"]').each(function(e,t){$(t).fancytree({checkbox:!0,selectMode:2,source:{data:{user_token:user_token,token:token,tree:e+1},url:"index.php?route="+extension+"module/attributico/getChildrenSettings"}})}),$("#form-attributico").submit(function(){$('[id ^= "tree"].settings').each(function(e,t){$(t).fancytree("getTree").generateFormElements()})}),$('a[data-toggle="pill"]').on("shown.bs.tab",function(e){$("#column-2 .alert-success").hide(),$("#column-2 .task-complete").hide(),$("#column-2 .alert-info").show()}),$("#vtabs2").bind("tabsselect",function(e,t){alert("select"),$("#column-2 .alert-success").hide(),$("#column-2 .task-complete").hide(),$("#column-2 .alert-info").show()}),$('[name = "attributico_product_text"]').each(function(e,t){$('[name = "attributico_autoadd"]').is(":checked")||$(t).prop({disabled:!0,checked:!1})}),$('input[name = "attributico_autoadd"]:checkbox').change(function(e){flag=$(this).is(":checked"),$('[name = "attributico_product_text"]').each(function(e,t){$(t).prop({disabled:!flag})})}),$('input[name = "attributico_smart_scroll"]:checkbox').change(function(e){$(this).is(":checked")?$('[id *= "tree"]:not(.settings) > ul.fancytree-container').addClass("smart-scroll"):$("ul.fancytree-container").removeClass("smart-scroll")}),$('input[name = "attributico_cache"]:checkbox').change(function(e){$.ajax({data:{user_token:user_token,token:token},url:"index.php?route="+extension+"module/attributico/cacheDelete",success:function(e){$category_synchro_trees.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.source.data.cache=$('input[name = "attributico_cache"]:checkbox').is(":checked"),n.reload().done(function(){n.options.source.data.isPending=!1,reloadAttribute(),reactivateCategory()})})}})}),$('input[name = "attributico_multistore"]:checkbox').change(function(e){$.ajax({data:{user_token:user_token,token:token},url:"index.php?route="+extension+"module/attributico/cacheDelete",success:function(e){$category_synchro_trees.each(function(e,t){var n=$("#"+t.id).fancytree("getTree");n.options.source.data.multistore=$('input[name = "attributico_multistore"]:checkbox').is(":checked"),n.reload().done(function(){n.options.source.data.isPending=!1,reloadAttribute(),reactivateCategory()})})}})}),$('input[id ^= "lazyLoad"]:checkbox').change(function(e){var t=$(this).attr("id"),n=$("#"+t.replace("lazyLoad_","")).fancytree("getTree"),o=$(this).is(":checked");n.options.source.data.lazyLoad=o,n.reload()}),$('input[id ^= "sortOrder"]:checkbox').change(function(e){var t=$(this).attr("id"),n=$("#"+t.replace("sortOrder_","")).fancytree("getTree"),o=$(this).is(":checked");n.options.source.data.sortOrder=o,n.options.source.data.category_id=currentCategory,n.reload()}),$('input[id ^= "autoCollapse"]:checkbox').change(function(e){var t=$(this).attr("id"),n=$(this).is(":checked");$("#"+t.replace("autoCollapse_","")).fancytree("getTree").options.autoCollapse=n}),$('input[id ^= "multiSelect"]:checkbox').change(function(e){var t=$(this).attr("id"),n=$("#"+t.replace("multiSelect_","")).fancytree("getTree");n.options.selectMode=$(this).is(":checked")?3:2}),$group_check_tree.each(function(e,t){var n=$('input[name = "attributico_sortorder"]:checkbox').is(":checked");$(t).fancytree({checkbox:!0,selectMode:3,autoScroll:!0,source:{data:{user_token:user_token,token:token,sortOrder:n,onlyGroup:!0,isPending:!1},url:"index.php?route="+extension+"module/attributico/getAttributeGroupTree"}})}),$category_check_tree.each(function(e,t){var n=$('input[name = "attributico_sortorder"]:checkbox').is(":checked");$(t).fancytree({autoCollapse:!0,autoScroll:!0,minExpandLevel:2,checkbox:!0,selectMode:$('input[id = "input-attributico_multiselect"]:checkbox').is(":checked")?3:2,source:{data:{user_token:user_token,token:token,sortOrder:n},url:"index.php?route="+extension+"module/attributico/getCategoryTree"}})})});